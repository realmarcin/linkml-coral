id: https://w3id.org/enigma/kbase-cdm-static-entities
name: kbase-cdm-static-entities
title: KBase CDM Static Entities Schema
description: |
  Static entity classes for KBase Common Data Model (CDM).

  This module defines 17 sdt_* (static data table) classes corresponding to
  core scientific entities in the ENIGMA data model:
  - Location, Sample, Community, Reads, Assembly, Bin, Genome, Gene
  - Strain, Taxon, ASV (OTU), Protocol, Image, Condition, Process
  - DubSeqLibrary, TnSeqLibrary

  Key CDM transformations from original CORAL:
  - Ontology term splitting: field → field_sys_oterm_id + field_sys_oterm_name
  - ID/name prefixing: id → sdt_{entity}_id, name → sdt_{entity}_name
  - FK references use _name columns instead of _id
  - Added 'link' fields for external references

version: 1.0.0
license: MIT

prefixes:
  linkml: https://w3id.org/linkml/
  kbase_cdm: https://w3id.org/enigma/kbase-cdm/
  DA: http://purl.obolibrary.org/obo/DA_
  ME: http://purl.obolibrary.org/obo/ME_
  ENVO: http://purl.obolibrary.org/obo/ENVO_
  UO: http://purl.obolibrary.org/obo/UO_
  PROCESS: http://purl.obolibrary.org/obo/PROCESS_
  CONTINENT: http://purl.obolibrary.org/obo/CONTINENT_
  COUNTRY: http://purl.obolibrary.org/obo/COUNTRY_
  MIxS: http://purl.obolibrary.org/obo/MIxS_

default_prefix: kbase_cdm

imports:
- linkml:types
- ./cdm_base

# ============================================================
# STATIC ENTITY CLASSES (sdt_*)
# ============================================================

classes:
  Location:
    mixins:
    - CDMEntity
    description: |
      Sampling location with geographic coordinates and environmental context.

      CDM changes from CORAL:
      - 4 ontology term fields split into ID+name pairs:
        continent, country, biome, feature
    annotations:
      term:
        tag: term
        value: DA:0000041
    slots:
    - sdt_location_id
    - sdt_location_name
    - latitude_degree
    - longitude_degree
    - continent_sys_oterm_id
    - continent_sys_oterm_name
    - country_sys_oterm_id
    - country_sys_oterm_name
    - region
    - biome_sys_oterm_id
    - biome_sys_oterm_name
    - feature_sys_oterm_id
    - feature_sys_oterm_name

  Sample:
    mixins:
    - CDMEntity
    description: |
      Environmental sample collected from a location.

      CDM changes from CORAL:
      - 2 ontology term fields split: material, env_package
      - FK reference: location → location_ref
    annotations:
      term:
        tag: term
        value: DA:0000042
    slots:
    - sdt_sample_id
    - sdt_sample_name
    - location_ref
    - sdt_location_name
    - depth_meter
    - elevation_meter
    - date
    - time
    - timezone
    - material_sys_oterm_id
    - material_sys_oterm_name
    - env_package_sys_oterm_id
    - env_package_sys_oterm_name
    - description
    - sdt_sample_description

  Community:
    mixins:
    - CDMEntity
    description: |
      Microbial community (isolate, enrichment, assemblage, or environmental).

      CDM changes from CORAL:
      - 1 ontology term field split: community_type
      - FK references: sample → sample_ref, parent_community → parent_community_ref
      - Multivalued FK: defined_strains → defined_strains_ref
    annotations:
      term:
        tag: term
        value: DA:0000071
    slots:
    - sdt_community_id
    - sdt_community_name
    - community_type_sys_oterm_id
    - community_type_sys_oterm_name
    - sample_ref
    - parent_community_ref
    - defined_strains_ref

  Reads:
    mixins:
    - CDMEntity
    description: |
      Sequencing reads dataset.

      CDM changes from CORAL:
      - 2 ontology term fields split: read_type, sequencing_technology
      - Added 'link' field for external data references
    annotations:
      term:
        tag: term
        value: DA:0000063
    slots:
    - sdt_reads_id
    - sdt_reads_name
    - read_count_count_unit
    - base_count
    - read_type_sys_oterm_id
    - read_type_sys_oterm_name
    - sequencing_technology_sys_oterm_id
    - sequencing_technology_sys_oterm_name
    - link

  Assembly:
    mixins:
    - CDMEntity
    description: |
      Genome assembly from sequencing reads.

      CDM changes from CORAL:
      - FK reference: strain → strain_ref
      - Added 'link' field
    annotations:
      term:
        tag: term
        value: DA:0000066
    slots:
    - sdt_assembly_id
    - sdt_assembly_name
    - strain_ref
    - sdt_strain_name
    - n_contigs_count_unit
    - total_size
    - link
    slot_usage:
      sdt_strain_name:
        required: false
        comments:
        - Denormalized field from strain reference, may be NULL

  Bin:
    mixins:
    - CDMEntity
    description: |
      Genome bin extracted from metagenomic assembly.

      CDM changes from CORAL:
      - FK reference: assembly → assembly_ref
      - contigs field contains comma-separated contig names
    annotations:
      term:
        tag: term
        value: DA:0000072
    slots:
    - sdt_bin_id
    - sdt_bin_name
    - assembly_ref
    - contigs

  Genome:
    mixins:
    - CDMEntity
    description: |
      Assembled and annotated genome.

      CDM changes from CORAL:
      - FK reference: strain → strain_ref
      - Added 'link' field
    annotations:
      term:
        tag: term
        value: DA:0000068
    slots:
    - sdt_genome_id
    - sdt_genome_name
    - strain_ref
    - sdt_strain_name
    - n_contigs_count_unit
    - n_features_count_unit
    - total_size
    - link
    slot_usage:
      sdt_strain_name:
        required: false
        comments:
        - Denormalized field from strain reference, may be NULL

  Gene:
    mixins:
    - CDMEntity
    description: |
      Annotated gene within a genome.

      CDM changes from CORAL:
      - FK reference: genome → genome_ref
      - Gene ID convention: GeneName{genome_name}_{contig}_{start}_{stop}
    annotations:
      term:
        tag: term
        value: DA:0000069
    slots:
    - sdt_gene_id
    - sdt_gene_name
    - genome_ref
    - contig_number_count_unit
    - strand
    - start_base_pair
    - stop_base_pair
    - function

  Strain:
    mixins:
    - CDMEntity
    description: |
      Microbial strain (isolated or derived).

      CDM changes from CORAL:
      - FK references: genome → genome_ref, derived_from → derived_from_strain_ref
      - Self-referential for strain derivation lineage
    annotations:
      term:
        tag: term
        value: DA:0000067
    slots:
    - sdt_strain_id
    - sdt_strain_name
    - genome_ref
    - derived_from_strain_ref
    - gene_names_changed

  Taxon:
    mixins:
    - CDMEntity
    description: |
      Taxonomic classification.
    annotations:
      term:
        tag: term
        value: DA:0000070
    slots:
    - sdt_taxon_id
    - sdt_taxon_name
    - ncbi_taxid

  ASV:
    mixins:
    - CDMEntity
    description: |
      Amplicon Sequence Variant (formerly OTU).

      CDM changes from CORAL:
      - Entity renamed from OTU to ASV (Amplicon Sequence Variant)
      - Table name: sdt_asv
    class_uri: kbase_cdm:ASV
    annotations:
      term:
        tag: term
        value: DA:0000073
      preferred_name:
        tag: preferred_name
        value: ASV
    slots:
    - sdt_asv_id
    - sdt_asv_name
    - sequence

  Protocol:
    mixins:
    - CDMEntity
    description: |
      Experimental protocol.

      CDM changes from CORAL:
      - Added 'link' field for protocol documents
      - Renamed description → sdt_protocol_description for CDM consistency
    annotations:
      term:
        tag: term
        value: DA:0000062
    slots:
    - sdt_protocol_id
    - sdt_protocol_name
    - sdt_protocol_description
    - link
    slot_usage:
      link:
        required: false
        comments:
        - Made optional to accommodate NULL values in parquet data

  Image:
    mixins:
    - CDMEntity
    description: |
      Microscopy or other image data.

      CDM changes from CORAL:
      - Added 'link' field for image files
    annotations:
      term:
        tag: term
        value: DA:0000074
    slots:
    - sdt_image_id
    - sdt_image_name
    - mime_type
    - size_byte
    - dimensions
    - link
    - sdt_image_description

  Condition:
    mixins:
    - CDMEntity
    description: |
      Growth or experimental condition.
    annotations:
      term:
        tag: term
        value: DA:0000075
    slots:
    - sdt_condition_id
    - sdt_condition_name

  DubSeqLibrary:
    mixins:
    - CDMEntity
    description: |
      Dual Barcoded Sequencing (DubSeq) library.

      CDM changes from CORAL:
      - FK reference: genome → genome_ref
    class_uri: kbase_cdm:DubSeqLibrary
    annotations:
      term:
        tag: term
        value: DA:0000076
    slots:
    - sdt_dubseq_library_id
    - sdt_dubseq_library_name
    - genome_ref
    - sdt_genome_name
    - n_fragments_count_unit
    slot_usage:
      sdt_genome_name:
        required: false
        comments:
        - Denormalized field from genome reference, may be NULL

  TnSeqLibrary:
    mixins:
    - CDMEntity
    description: |
      Transposon Sequencing (TnSeq) library.

      CDM changes from CORAL:
      - FK reference: genome → genome_ref
    class_uri: kbase_cdm:TnSeqLibrary
    annotations:
      term:
        tag: term
        value: DA:0000077
    slots:
    - sdt_tnseq_library_id
    - sdt_tnseq_library_name
    - genome_ref
    - sdt_genome_name
    - primers_model
    - n_mapped_reads_count_unit
    - n_barcodes_count_unit
    - n_insertion_locations_count_unit
    - n_usable_barcodes_count_unit
    - hit_rate_essential_ratio_unit
    - hit_rate_other_ratio_unit
    slot_usage:
      sdt_genome_name:
        required: false
        comments:
        - Denormalized field from genome reference, may be NULL

  ENIGMA:
    mixins:
    - CDMEntity
    description: |
      Root entity (database singleton).
    annotations:
      term:
        tag: term
        value: DA:0000001
    slots:
    - sdt_enigma_id

# ============================================================
# SLOTS - Entity-specific slots with CDM naming
# ============================================================

slots:
  # Location slots
  sdt_location_id:
    description: Unique identifier for Location
    range: string
    required: true
    identifier: true
    pattern: '^Location\d{7}$'

    annotations:
      microtype: ME:0000266
      constraint_type: primary_key
      original_name: id
  sdt_location_name:
    description: Name of location
    range: EntityName
    required: true

    annotations:
      microtype: ME:0000228
      constraint_type: unique_key
      original_name: name
  latitude_degree:
    description: Latitude in decimal degrees
    range: Latitude
    required: true

    annotations:
      microtype: ME:0000211
      units: UO:0000185
      original_name: latitude
  longitude_degree:
    description: Longitude in decimal degrees
    range: Longitude
    required: true

    annotations:
      microtype: ME:0000212
      units: UO:0000185
      original_name: longitude
  continent_sys_oterm_id:
    description: Continent ontology term ID
    range: OntologyTermID
    required: true

    annotations:
      microtype: ME:0000213
      constraint_type: foreign_key
      original_name: continent
  continent_sys_oterm_name:
    description: Continent ontology term name
    range: string
    required: true

    annotations:
      microtype: ME:0000213
      original_name: continent
  country_sys_oterm_id:
    description: Country ontology term ID
    range: OntologyTermID
    required: true

    annotations:
      microtype: ME:0000214
      constraint_type: foreign_key
      original_name: country
  country_sys_oterm_name:
    description: Country ontology term name
    range: string
    required: true

    annotations:
      microtype: ME:0000214
      original_name: country
  region:
    description: Geographic region
    range: string
    required: true

    annotations:
      microtype: ME:0000215
      original_name: region
  biome_sys_oterm_id:
    description: Biome ontology term ID (ENVO)
    range: OntologyTermID
    required: true

    annotations:
      microtype: ME:0000216
      constraint_type: foreign_key
      original_name: biome
  biome_sys_oterm_name:
    description: Biome ontology term name
    range: string
    required: true

    annotations:
      microtype: ME:0000216
      original_name: biome
  feature_sys_oterm_id:
    description: Environmental feature ontology term ID
    range: OntologyTermID
    required: false

    annotations:
      microtype: ME:0000217
      constraint_type: foreign_key
      original_name: feature
  feature_sys_oterm_name:
    description: Environmental feature ontology term name
    range: string
    required: false

  # Sample slots
    annotations:
      microtype: ME:0000217
      original_name: feature
  sdt_sample_id:
    description: Unique identifier for Sample
    range: string
    required: true
    identifier: true
    pattern: '^Sample\d{7}$'

    annotations:
      microtype: ME:0000267
      constraint_type: primary_key
      original_name: id
  sdt_sample_name:
    description: Name of sample
    range: EntityName
    required: true

    annotations:
      microtype: ME:0000102
      constraint_type: foreign_key
      original_name: sample
  location_ref:
    description: Reference to location name (FK to Location.sdt_location_name)
    range: EntityName
    required: false
    comments:
    - CDM convention: FK references use entity name, not ID
    - References Location.sdt_location_name

  depth_meter:
    description: Depth in meters
    range: Depth
    required: false

    annotations:
      microtype: ME:0000219
      units: UO:0000008
      original_name: depth
  elevation_meter:
    description: Elevation in meters
    range: Elevation
    required: false

    annotations:
      microtype: ME:0000220
      units: UO:0000008
      original_name: elevation
  date:
    description: Collection date
    range: Date
    required: true

    annotations:
      microtype: ME:0000009
      original_name: date
    pattern: \d\d\d\d(-\d\d(-\d\d)?)?
  time:
    description: Collection time
    range: Time
    required: false

    annotations:
      microtype: ME:0000010
      original_name: time
    pattern: \d(\d)?(:\d\d(:\d\d)?)?\s*([apAP][mM])?
  timezone:
    description: Timezone
    range: string
    required: false

    annotations:
      microtype: ME:0000201
      original_name: timezone
  material_sys_oterm_id:
    description: Material type ontology term ID
    range: OntologyTermID
    required: false

    annotations:
      microtype: ME:0000230
      constraint_type: foreign_key
      original_name: material
  material_sys_oterm_name:
    description: Material type ontology term name
    range: string
    required: false

    annotations:
      microtype: ME:0000230
      original_name: material
  env_package_sys_oterm_id:
    description: Environment package ontology term ID
    range: OntologyTermID
    required: true

    annotations:
      microtype: ME:0000229
      constraint_type: foreign_key
      original_name: env_package
  env_package_sys_oterm_name:
    description: Environment package ontology term name
    range: string
    required: true

    annotations:
      microtype: ME:0000229
      original_name: env_package
  description:
    description: Free text description
    range: string
    required: false

  sdt_sample_description:
    description: Sample description (denormalized from Sample entity)
    range: string
    required: false
    comments:
    - Denormalized field present in parquet data for query optimization

  # Community slots
  sdt_community_id:
    description: Unique identifier for Community
    range: string
    required: true
    identifier: true
    pattern: '^Community\d{7}$'

    annotations:
      microtype: ME:0000272
      constraint_type: primary_key
      original_name: id
  sdt_community_name:
    description: Name of community
    range: EntityName
    required: true

    annotations:
      microtype: ME:0000233
      constraint_type: unique_key
      original_name: name
  community_type_sys_oterm_id:
    description: Community type ontology term ID
    range: OntologyTermID
    required: true

    annotations:
      microtype: ME:0000234
      constraint_type: foreign_key
      original_name: community_type
  community_type_sys_oterm_name:
    description: Community type ontology term name
    range: string
    required: true

    annotations:
      microtype: ME:0000234
      original_name: community_type
  sample_ref:
    description: Reference to sample name (FK to Sample.sdt_sample_name)
    range: EntityName
    required: false
    comments:
    - CDM convention: FK references use entity name, not ID
    - References Sample.sdt_sample_name

  parent_community_ref:
    description: Reference to parent community name (FK, self-referential to Community.sdt_community_name)
    range: EntityName
    required: false
    comments:
    - Self-referential FK for community hierarchies
    - References Community.sdt_community_name

  defined_strains_ref:
    description: References to defined strain names (multivalued FK to Strain.sdt_strain_name)
    range: EntityName
    required: false
    multivalued: true
    comments:
    - Multivalued FK for assemblage communities
    - References Strain.sdt_strain_name

  # Reads slots
  sdt_reads_id:
    description: Unique identifier for Reads
    range: string
    required: true
    identifier: true
    pattern: '^Reads\d{7}$'

    annotations:
      microtype: ME:0000273
      constraint_type: primary_key
      original_name: id
  sdt_reads_name:
    description: Name of reads dataset
    range: EntityName
    required: true

    annotations:
      microtype: ME:0000248
      constraint_type: unique_key
      original_name: name
  read_count_count_unit:
    description: Number of reads
    range: Count
    required: true

    annotations:
      microtype: ME:0000126
      units: UO:0000189
      original_name: read_count
  base_count:
    description: Total number of bases
    range: Count
    required: false

  read_type_sys_oterm_id:
    description: Read type ontology term ID (e.g., paired-end, single-end)
    range: OntologyTermID
    required: true

    annotations:
      microtype: ME:0000112
      constraint_type: foreign_key
      original_name: read_type
  read_type_sys_oterm_name:
    description: Read type ontology term name
    range: string
    required: true

    annotations:
      microtype: ME:0000112
      original_name: read_type
  sequencing_technology_sys_oterm_id:
    description: Sequencing technology ontology term ID
    range: OntologyTermID
    required: true

    annotations:
      microtype: ME:0000116
      constraint_type: foreign_key
      original_name: sequencing_technology
  sequencing_technology_sys_oterm_name:
    description: Sequencing technology ontology term name
    range: string
    required: true

  # Assembly slots
    annotations:
      microtype: ME:0000116
      original_name: sequencing_technology
  sdt_assembly_id:
    description: Unique identifier for Assembly
    range: string
    required: true
    identifier: true
    pattern: '^Assembly\d{7}$'

    annotations:
      microtype: ME:0000281
      constraint_type: primary_key
      original_name: id
  sdt_assembly_name:
    description: Name of assembly
    range: EntityName
    required: true

    annotations:
      microtype: ME:0000280
      constraint_type: unique_key
      original_name: name
  strain_ref:
    description: Reference to strain name (FK to Strain.sdt_strain_name)
    range: EntityName
    required: false
    comments:
    - CDM convention: FK references use entity name, not ID
    - References Strain.sdt_strain_name

  n_contigs_count_unit:
    description: Number of contigs
    range: Count
    required: true

    annotations:
      microtype: ME:0000126
      units: UO:0000189
      original_name: n_contigs
  total_size:
    description: Total assembly size in base pairs
    range: Size
    required: false

  # Bin slots
  sdt_bin_id:
    description: Unique identifier for Bin
    range: string
    required: true
    identifier: true
    pattern: '^Bin\d{7}$'

    annotations:
      microtype: ME:0000331
      constraint_type: primary_key
      original_name: id
  sdt_bin_name:
    description: Name of bin
    range: EntityName
    required: true

    annotations:
      microtype: ME:0000330
      constraint_type: unique_key
      original_name: name
  assembly_ref:
    description: Reference to assembly name (FK to Assembly.sdt_assembly_name)
    range: EntityName
    required: false
    comments:
    - CDM convention: FK references use entity name, not ID
    - References Assembly.sdt_assembly_name

  contigs:
    description: Comma-separated list of contig names
    range: string
    required: true

  # Genome slots
    annotations:
      microtype: ME:0000240
      original_name: contigs
  sdt_genome_id:
    description: Unique identifier for Genome
    range: string
    required: true
    identifier: true
    pattern: '^Genome\d{7}$'

    annotations:
      microtype: ME:0000274
      constraint_type: primary_key
      original_name: id
  sdt_genome_name:
    description: Name of genome
    range: EntityName
    required: true

    annotations:
      microtype: ME:0000246
      constraint_type: foreign_key
      original_name: genome
  genome_ref:
    description: Reference to genome name (FK to Genome.sdt_genome_name)
    range: EntityName
    required: false
    comments:
    - CDM convention: FK references use entity name, not ID
    - References Genome.sdt_genome_name
    - Used by: Gene, Strain, DubSeqLibrary, TnSeqLibrary

  n_features_count_unit:
    description: Number of annotated features
    range: Count
    required: true

  # Gene slots
    annotations:
      microtype: ME:0000126
      units: UO:0000189
      original_name: n_features
  sdt_gene_id:
    description: Unique identifier for Gene
    range: string
    required: true
    identifier: true
    pattern: '^Gene\d{7}$'

    annotations:
      microtype: ME:0000275
      constraint_type: primary_key
      original_name: id
  sdt_gene_name:
    description: Name of gene
    range: EntityName
    required: true

    annotations:
      microtype: ME:0000224
      constraint_type: unique_key
      original_name: gene_id
  contig_number_count_unit:
    description: Contig number where gene is located
    range: integer
    required: true

    annotations:
      microtype: ME:0000126
      units: UO:0000189
      original_name: contig_number
  strand:
    description: DNA strand (+ or -)
    range: string
    required: true
    pattern: '^[+-]$'

    annotations:
      microtype: ME:0000186
      original_name: strand
  start_base_pair:
    description: Start position on contig
    range: integer
    required: true

    annotations:
      microtype: ME:0000242
      units: UO:0000244
      original_name: start
  stop_base_pair:
    description: Stop position on contig
    range: integer
    required: true

    annotations:
      microtype: ME:0000243
      units: UO:0000244
      original_name: stop
  function:
    description: Predicted gene function
    range: string
    required: false

  # Strain slots
    annotations:
      microtype: ME:0000250
      original_name: function
  sdt_strain_id:
    description: Unique identifier for Strain
    range: string
    required: true
    identifier: true
    pattern: '^Strain\d{7}$'

    annotations:
      microtype: ME:0000271
      constraint_type: primary_key
      original_name: id
  sdt_strain_name:
    description: Name of strain
    range: EntityName
    required: true

    annotations:
      microtype: ME:0000044
      constraint_type: foreign_key
      original_name: strain
  derived_from_strain_ref:
    description: Reference to parent strain name (FK, self-referential to Strain.sdt_strain_name)
    range: EntityName
    required: false
    comments:
    - Self-referential FK for strain derivation lineage
    - References Strain.sdt_strain_name

  gene_names_changed:
    description: Names of genes that were changed
    range: EntityName
    required: false
    multivalued: true

  # Taxon slots
  sdt_taxon_id:
    description: Unique identifier for Taxon
    range: string
    required: true
    identifier: true
    pattern: '^Taxon\d{7}$'

    annotations:
      microtype: ME:0000268
      constraint_type: primary_key
      original_name: id
  sdt_taxon_name:
    description: Taxonomic name
    range: EntityName
    required: true

    annotations:
      microtype: ME:0000047
      constraint_type: unique_key
      original_name: name
  ncbi_taxid:
    description: NCBI Taxonomy ID (CURIE format, e.g., NCBITaxon:768507)
    range: string
    required: false
    comments:
    - Changed from integer to string to accommodate CURIE format in parquet data

  # ASV slots
    annotations:
      microtype: ME:0000223
      original_name: ncbi_taxid
  sdt_asv_id:
    description: Unique identifier for ASV
    range: string
    required: true
    identifier: true
    pattern: '^ASV\d{7}$'

    annotations:
      microtype: ME:0000269
      constraint_type: primary_key
      original_name: id
  sdt_asv_name:
    description: Name of ASV
    range: EntityName
    required: true

    annotations:
      microtype: ME:0000222
      constraint_type: unique_key
      original_name: name
  sequence:
    description: DNA sequence
    range: string
    required: false

  # Protocol slots
  sdt_protocol_id:
    description: Unique identifier for Protocol
    range: string
    required: true
    identifier: true
    pattern: '^Protocol\d{7}$'

    annotations:
      microtype: ME:0000332
      constraint_type: primary_key
      original_name: id
  sdt_protocol_name:
    description: Name of protocol
    range: EntityName
    required: true

    annotations:
      microtype: ME:0000328
      constraint_type: unique_key
      original_name: name
  sdt_protocol_description:
    description: Protocol description
    range: string
    required: false

  # Image slots
    annotations:
      microtype: ME:0000202
      original_name: description
  sdt_image_id:
    description: Unique identifier for Image
    range: string
    required: true
    identifier: true
    pattern: '^Image\d{7}$'

    annotations:
      microtype: ME:0000356
      constraint_type: primary_key
      original_name: id
  sdt_image_name:
    description: Name of image
    range: EntityName
    required: true

    annotations:
      microtype: ME:0000355
      constraint_type: unique_key
      original_name: name
  mime_type:
    description: MIME type of image
    range: string
    required: false

    annotations:
      microtype: ME:0000357
      original_name: MIME type
  size_byte:
    description: File size in bytes
    range: Size
    required: false

    annotations:
      microtype: ME:0000128
      units: UO:0000233
      original_name: size
  dimensions:
    description: Image dimensions (e.g., "1024x768")
    range: string
    required: false

  # Condition slots
    annotations:
      microtype: ME:0000292
      units: UO:0000236
      original_name: dimensions
  sdt_image_description:
    description: Image description
    range: string
    required: false
    comments:
    - Present in parquet data for additional image metadata

  sdt_condition_id:
    description: Unique identifier for Condition
    range: string
    required: true
    identifier: true
    pattern: '^Condition\d{7}$'

    annotations:
      microtype: ME:0000270
      constraint_type: primary_key
      original_name: id
  sdt_condition_name:
    description: Name of condition
    range: EntityName
    required: true

  # DubSeqLibrary slots
    annotations:
      microtype: ME:0000200
      constraint_type: foreign_key
      original_name: condition
  sdt_dubseq_library_id:
    description: Unique identifier for DubSeqLibrary
    range: string
    required: true
    identifier: true
    pattern: '^DubSeq_Library\d{7}$'

    annotations:
      microtype: ME:0000276
      constraint_type: primary_key
      original_name: id
  sdt_dubseq_library_name:
    description: Name of DubSeq library
    range: EntityName
    required: true

    annotations:
      microtype: ME:0000262
      constraint_type: unique_key
      original_name: name
  n_fragments_count_unit:
    description: Number of fragments
    range: Count
    required: false

  # TnSeqLibrary slots
    annotations:
      microtype: ME:0000126
      units: UO:0000189
      original_name: n_fragments
  sdt_tnseq_library_id:
    description: Unique identifier for TnSeqLibrary
    range: string
    required: true
    identifier: true
    pattern: '^TnSeq_Library\d{7}$'

    annotations:
      microtype: ME:0000276
      constraint_type: primary_key
      original_name: id
  sdt_tnseq_library_name:
    description: Name of TnSeq library
    range: EntityName
    required: true

    annotations:
      microtype: ME:0000262
      constraint_type: unique_key
      original_name: name
  primers_model:
    description: Primers model used
    range: string
    required: true

    annotations:
      microtype: ME:0000263
      original_name: primers_model
  n_mapped_reads_count_unit:
    description: Number of mapped reads
    range: Count
    required: false

    annotations:
      microtype: ME:0000126
      units: UO:0000189
      original_name: n_mapped_reads
  n_barcodes_count_unit:
    description: Number of barcodes
    range: Count
    required: false

    annotations:
      microtype: ME:0000126
      units: UO:0000189
      original_name: n_barcodes
  n_insertion_locations_count_unit:
    description: Number of insertion locations
    range: Count
    required: false

    annotations:
      microtype: ME:0000126
      units: UO:0000189
      original_name: n_insertion_locations
  n_usable_barcodes_count_unit:
    description: Number of usable barcodes
    range: Count
    required: false

    annotations:
      microtype: ME:0000126
      units: UO:0000189
      original_name: n_usable_barcodes
  hit_rate_essential_ratio_unit:
    description: Hit rate for essential genes
    range: float
    required: false

    annotations:
      microtype: ME:0000238
      units: UO:0000191
      original_name: hit_rate_essential
  hit_rate_other_ratio_unit:
    description: Hit rate for other genes
    range: float
    required: false

    annotations:
      microtype: ME:0000238
      units: UO:0000191
      original_name: hit_rate_other

  # ENIGMA slots
  sdt_enigma_id:
    description: Unique identifier for ENIGMA root entity (singleton table)
    range: string
    required: false
    identifier: true
    comments:
    - Singleton table with NULL value in current parquet data
    - Pattern '^ENIGMA1$' removed to match actual data
    annotations:
      constraint_type: primary_key
